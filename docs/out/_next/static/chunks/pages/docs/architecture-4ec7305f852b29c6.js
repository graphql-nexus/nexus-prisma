(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[163],{2262:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/architecture",function(){return s(7493)}])},1747:function(e,t,s){"use strict";s.d(t,{t:function(){return o}});var i=s(5893),o=(0,s(7294).memo)((function(e){var t=e.width,s=e.height;return(0,i.jsxs)("svg",{width:t,height:s,viewBox:"0 0 530 192",preserveAspectRatio:"xMidYMid meet","aria-label":"Nexus Prisma Logo",fill:"#0099FF",children:[(0,i.jsx)("path",{d:"M446.933 2.26666C445.333 3.59999 427.467 31.6 407.2 64.4C376.133 114.8 370.533 124.8 371.067 128C372 132.4 405.467 184.8 410.133 189.067C412 190.667 414.533 192 415.733 192C416.933 192 441.733 185.067 470.667 176.533C505.2 166.267 524.4 160 526.4 158.267C528 156.667 529.333 154 529.333 151.867C529.333 146.667 463.467 6.79999 459.2 2.93332C455.2 -0.53334 450.667 -0.800003 446.933 2.26666ZM488.133 86C504.133 119.733 517.2 147.6 517.2 148C517.467 150.8 509.733 153.6 470.533 165.2C435.067 175.733 425.6 178.133 424.267 176.8C422.933 175.467 425.467 161.2 438 101.2C446.4 60.5333 453.6 26.5333 454 25.6C456.133 19.7333 460.267 27.0667 488.133 86Z"}),(0,i.jsx)("path",{d:"M80.1333 23.0667C68.5333 26.8 60.8 41.4667 64 53.4667C64.9333 56.6667 66.1333 60 66.6667 60.6667C67.3333 61.4667 60.4 73.4667 49.3333 90.4L30.6667 118.667H25.7333C0.400002 118.8 -8.93333 152.267 12.4 166.4C16.8 169.333 19.3333 170 26.1333 170C33.2 170 35.3333 169.467 40.2667 166C51.3333 158.267 54.9333 144.8 48.9333 132.933L45.8667 126.933L63.6 99.7333L81.3333 72.6667L87.4667 73.0667L93.4667 73.6L106.8 100.133L120 126.667L117.067 130.667C112.8 136.533 112.133 148.533 115.733 155.6C123.333 170.4 141.2 174.933 154.4 165.333C164.133 158.4 167.6 145.867 163.2 134.667C161.067 129.467 161.067 129.2 164.267 124.267C166.133 121.6 168.533 117.733 169.867 115.733L172.133 112.133L165.2 107.467L158.133 102.8L152.667 111.067L147.067 119.333L140.8 118.933L134.667 118.4L121.333 91.8667L107.867 65.2L110.933 61.0667C115.2 55.0667 115.867 43.4667 112.267 36.5333C105.867 24 93.4667 18.8 80.1333 23.0667Z"}),(0,i.jsx)("path",{d:"M194.267 22.6667C188.133 24.5333 181.2 30.6667 178.533 36.5333C175.067 44.1333 175.333 51.6 179.2 59.3333L182.533 65.7333L177.2 73.4667C174.4 77.7333 172 81.4667 172 81.7333C172 83.2 185.333 90.8 186.533 90.1333C187.2 89.6 190 85.7333 192.667 81.3333C197.2 73.8667 197.867 73.3333 202.533 73.3333C214.267 73.3333 226.533 62.4 227.733 50.9333C229.6 31.4667 212.533 17.2 194.267 22.6667ZM209.333 40C210.933 41.6 212 44.4 212 47.3333C212 50.2667 210.933 53.0667 209.333 54.6667C207.733 56.2667 204.933 57.3333 202 57.3333C199.067 57.3333 196.267 56.2667 194.667 54.6667C193.067 53.0667 192 50.2667 192 47.3333C192 44.4 193.067 41.6 194.667 40C196.267 38.4 199.067 37.3333 202 37.3333C204.933 37.3333 207.733 38.4 209.333 40Z"}),(0,i.jsx)("path",{d:"M279 87V69H290V87H308V98H290V116H279V98H261V87H279Z"})]})}));o.displayName="NexusPrismaIcon"},6424:function(e,t,s){"use strict";var i=s(5893),o=s(1747);t.Z={github:"https://github.com/prisma/nexus-prisma",projectLink:"https://github.com/prisma/nexus-prisma",docsRepositoryBase:"https://github.com/prisma/nexus-prisma/blob/main/docs/pages",titleSuffix:" | Nexus Prisma",search:!0,floatTOC:!0,feedbackLink:"Question? Give us feedback \u2192",footerText:"MIT ".concat((new Date).getFullYear()," \xa9 Prisma Data Inc."),banner:function(){return(0,i.jsx)("a",{href:"https://github.com/graphql-nexus/nexus-plugin-prisma/issues/1039",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-current no-underline",title:"Go to the GitHub issue",children:"\u26a0\ufe0f Currently in early preview - not to be used in production! Follow progress \u2192"})},logo:function(){return(0,i.jsxs)("div",{className:"flex items-center justify-center",children:[(0,i.jsx)(o.t,{width:"4em",height:"4em"}),(0,i.jsx)("div",{className:"ml-2",children:"Nexus Prisma"})]})},head:function(e){var t=e.title,s=e.description;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),(0,i.jsx)("meta",{name:"description",content:s}),(0,i.jsx)("meta",{property:"og:type",content:"website"}),(0,i.jsx)("meta",{name:"og:title",content:t}),(0,i.jsx)("meta",{name:"og:description",content:s}),(0,i.jsx)("meta",{property:"og:locale",content:"en_US"}),(0,i.jsx)("meta",{property:"og:site_name",content:"Prisma Nexus"})]})},footerEditLink:function(){return"Edit this page on GitHub"},gitTimestamp:"Last updated on"}},7493:function(e,t,s){"use strict";s.r(t);var i=s(1799),o=s(9396),r=s(5893),n=s(7308),a=s(9730),l=s(6424),c=(s(8658),s(1151)),u=s(5675),d=s.n(u),h="Architecture";function p(e){var t=Object.assign({h1:"h1",p:"p",h2:"h2",ol:"ol",li:"li",code:"code",div:"div",pre:"pre",span:"span"},(0,c.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"Architecture"}),"\n",(0,r.jsx)(t.p,{children:"Understanding the following information should not be required knowledge for using Nexus Prisma. It is primarily here for internal maintenance and collaboration. But we're happy for whatever benefit you get out of it too."}),"\n",(0,r.jsx)(t.h2,{id:"system",children:"System"}),"\n",(0,r.jsx)(d(),{src:"/images/architecture.jpg",alt:"Architecture",width:2799,height:1508,layout:"responsive"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["You or a script (CI, programmatic, etc.) run ",(0,r.jsx)(t.code,{children:"$ prisma generate"}),"."]}),"\n",(0,r.jsx)(t.li,{children:"Prisma generator system reads your Prisma schema file"}),"\n",(0,r.jsx)(t.li,{children:'Prisma generator system runs the Nexus Prisma generator passing it the "DMMF", a structured representation of your Prisma schema.'}),"\n",(0,r.jsx)(t.li,{children:"Nexus Prisma generator reads your Nexus Prisma generator configuration if present."}),"\n",(0,r.jsxs)(t.li,{children:["Nexus Prisma generator writes generated source code. By default into a special place within the ",(0,r.jsx)(t.code,{children:"nexus-prisma"})," package in your ",(0,r.jsx)(t.code,{children:"node_modules"}),". However, you can configure this location."]}),"\n",(0,r.jsxs)(t.li,{children:["Later when you run your code it imports ",(0,r.jsx)(t.code,{children:"nexus-prisma"})," which hits the generated entrypoint."]}),"\n",(0,r.jsx)(t.li,{children:"The generated runtime is actually thin, making use of a larger static runtime."}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"package-exports",children:"Package Exports"}),"\n",(0,r.jsx)(t.p,{children:"When users choose a custom Nexus Prisma output directory the generated runtime needs to import the static runtime. There are a few things that need to happen in order for this to work:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsx)(t.li,{children:"The output's imports needs to specify the package to import from"}),"\n",(0,r.jsx)(t.li,{children:"The output's imports needs to specify the subpath to import from"}),"\n"]}),"\n",(0,r.jsxs)(t.p,{children:["For (1) we import from ",(0,r.jsx)(t.code,{children:"'nexus-prisma'"}),". We just rely on the assumption that the user is outputting into a directory where eventually ",(0,r.jsx)(t.code,{children:"node_modules/nexus-prisma"})," will should up in the CWD path as Node module resolution algorithm executes."]}),"\n",(0,r.jsxs)(t.p,{children:["For (2) we look if user is outputting ESM or CJS (gentime config) and based on that access either ",(0,r.jsx)(t.code,{children:"/dist-cjs"})," or ",(0,r.jsx)(t.code,{children:"/dist-esm"}),". In order to support this we need to break the encapsulation provided by package.json ",(0,r.jsx)(t.code,{children:"exports"})," field. We need to configure in it:"]}),"\n",(0,r.jsx)(t.div,{"data-rehype-pretty-code-fragment":"","data-nextra-code":"",children:(0,r.jsx)(t.pre,{children:(0,r.jsxs)(t.code,{"data-language":"json","data-theme":"default",children:[(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./*"'}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:": {"})]}),"\n",(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"\t"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:'"default"'}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./*.js"'})]}),"\n",(0,r.jsx)(t.span,{className:"line",children:(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,r.jsx)(t.p,{children:"We cannot do something slightly cleaner either like this:"}),"\n",(0,r.jsx)(t.div,{"data-rehype-pretty-code-fragment":"","data-nextra-code":"",children:(0,r.jsx)(t.pre,{children:(0,r.jsxs)(t.code,{"data-language":"json","data-theme":"default",children:[(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./_/*"'}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:": {"})]}),"\n",(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"\t"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:'"require"'}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./dist-cjs/*.js"'}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:","})]}),"\n",(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"\t"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:'"import"'}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-punctuation)"},children:":"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"./dist-esm/*.js"'})]}),"\n",(0,r.jsx)(t.span,{className:"line",children:(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})})}),"\n",(0,r.jsxs)(t.p,{children:["Because ",(0,r.jsx)(t.code,{children:"ncc"}),", at least, does not support resolving ",(0,r.jsx)(t.code,{children:".../_/..."})," imports to what is specified in the package exports."]})]})}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(0,c.ah)(),e.components),s=t.wrapper;return s?(0,r.jsx)(s,(0,o.Z)((0,i.Z)({},e),{children:(0,r.jsx)(p,(0,i.Z)({},e))})):p(e)}var x={filename:"architecture.mdx",route:"/docs/architecture",meta:{title:"Architecture - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."},pageMap:[{name:"docs",children:[{name:"architecture",route:"/docs/architecture",locale:"",frontMatter:{title:"Architecture - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}},{name:"features",route:"/docs/features",locale:"",frontMatter:{title:"Features - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}},{name:"index",route:"/docs",locale:"",frontMatter:{title:"Introduction - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}},{name:"meta.json",locale:"",meta:{index:"Introduction",usage:"Usage",features:"Features",settings:"Settings",recipes:"Recipes",notes:"Notes",architecture:"Architecture"}},{name:"notes",route:"/docs/notes",locale:"",frontMatter:{title:"Notes - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}},{name:"recipes",route:"/docs/recipes",locale:"",frontMatter:{title:"Recipes - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}},{name:"settings",children:[{name:"gentime",route:"/docs/settings/gentime",locale:"",frontMatter:{title:"Gentime - Settings - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}},{name:"meta.json",locale:"",meta:{gentime:"Gentime",runtime:"Runtime"}},{name:"runtime",route:"/docs/settings/runtime",locale:"",frontMatter:{title:"Runtime - Settings - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}}],route:"/docs/settings"},{name:"usage",route:"/docs/usage",locale:"",frontMatter:{title:"Usage - Docs",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}}],route:"/docs"},{name:"index",route:"/",locale:"",frontMatter:{title:"Nexus Prisma - Prisma plugin for Nexus",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}},{name:"meta.json",locale:"",meta:{"*":{type:"page"},index:{title:"Home",hidden:"true",theme:{layout:"raw"}},docs:"Docs",roadmap:"Roadmap"}},{name:"roadmap",route:"/roadmap",locale:"",frontMatter:{title:"Roadmap",description:"This plugin integrates Prisma into Nexus. It gives you an API you to project fields from models defined in your Prisma schema into your GraphQL API. It also gives you an API to build GraphQL root fields that allow your API clients to query and mutate data."}}],headings:[{type:"heading",depth:1,children:[{type:"text",value:"Architecture",position:{start:{line:4,column:3,offset:35},end:{line:4,column:15,offset:47}}}],position:{start:{line:4,column:1,offset:33},end:{line:4,column:15,offset:47}},value:"Architecture"},{type:"heading",depth:2,children:[{type:"text",value:"System",position:{start:{line:8,column:4,offset:275},end:{line:8,column:10,offset:281}}}],position:{start:{line:8,column:1,offset:272},end:{line:8,column:10,offset:281}},value:"System"},{type:"heading",depth:2,children:[{type:"text",value:"Package Exports",position:{start:{line:20,column:4,offset:1105},end:{line:20,column:19,offset:1120}}}],position:{start:{line:20,column:1,offset:1102},end:{line:20,column:19,offset:1120}},value:"Package Exports"}],unstable_flexsearch:!0};globalThis.__nextra_internal__={pageMap:x.pageMap,route:x.route};t.default=(0,a.ZP)("/docs/architecture",(function(e){return(0,r.jsx)(n.SSGContext.Provider,{value:e,children:(0,r.jsx)(m,{})})}),(0,i.Z)({title:x.meta.title||h},x),l.Z)}},function(e){e.O(0,[912,675,774,888,179],(function(){return t=2262,e(e.s=t);var t}));var t=e.O();_N_E=t}]);